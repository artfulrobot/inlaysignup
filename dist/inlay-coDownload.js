(()=>{"use strict";var e={247:(e,n,t)=>{t.d(n,{Z:()=>i});var o=t(645),a=t.n(o)()((function(e){return e[1]}));a.push([e.id,"body.inlay-download-modal-active{overflow:hidden;position:fixed}.inlay-download .idl-overlay{align-items:center;background-color:hsla(0,0%,100%,.8);bottom:0;display:none;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.inlay-download.focussed .idl-overlay{display:flex}.inlay-download .idl-locator{background:#f8f8f5;border-radius:0;flex:0 1 60rem;max-height:90vh;overflow:auto;padding:2rem;position:relative}.inlay-download .idl-close{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;border:none;color:#888;display:block;font-size:2rem;line-height:1;margin:0;padding:0;position:absolute;right:1rem;text-align:center;top:1rem;width:4rem}.inlay-download .idl-thanks{font-size:1.6rem;text-align:center}.inlay-download .idl-progress-container{height:2px;margin-top:.25rem}.inlay-download .idl-progress-container .idl-progress{height:2px}.inlay-download .idl-progress-container.active{background-color:#fff}.inlay-download .idl-progress-container.active .idl-progress{background-color:#f25d2a}.inlay-download label{font-weight:700;padding:.375rem}.inlay-download label p{font-size:inherit}.inlay-download label p:last-child{margin-bottom:0}.inlay-download input[type=email],.inlay-download input[type=text],.inlay-download textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border:1px solid #dcdcdc;color:#111;padding:.75rem;width:100%}.inlay-download form{align-items:top;display:flex;flex-wrap:wrap;margin:0 -1rem;padding:0}.inlay-download h2{flex:0 100%;padding:0 5rem 0 1rem}.inlay-download .idl-field{flex:1 0 45%;margin-bottom:1rem;min-width:18rem;padding:0 1rem}.inlay-download .idl-field.followup,.inlay-download .idl-field.question{flex:0 0 100%}.inlay-download .idl-buttons{flex:0 0 100%;padding-bottom:2rem;text-align:center}.inlay-download a:link,.inlay-download a:visited{color:#f25d2a}.inlay-download a:active,.inlay-download a:hover{color:#f25d2a;text-decoration:underline}.inlay-download .idl-warning{background-color:#f25d2a;color:#fff;padding:.5rem 1rem}.inlay-download .idl-warning p:last-child{margin-bottom:0}",""]);const i=a},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t=e(n);return n[2]?"@media ".concat(n[2]," {").concat(t,"}"):t})).join("")},n.i=function(e,t,o){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(o)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(a[l]=!0)}for(var r=0;r<e.length;r++){var d=[].concat(e[r]);o&&a[d[0]]||(t&&(d[2]?d[2]="".concat(t," and ").concat(d[2]):d[2]=t),n.push(d))}},n}},379:(e,n,t)=>{var o,a=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},i=function(){var e={};return function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}e[n]=t}return e[n]}}(),l=[];function r(e){for(var n=-1,t=0;t<l.length;t++)if(l[t].identifier===e){n=t;break}return n}function d(e,n){for(var t={},o=[],a=0;a<e.length;a++){var i=e[a],d=n.base?i[0]+n.base:i[0],s=t[d]||0,c="".concat(d," ").concat(s);t[d]=s+1;var u=r(c),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==u?(l[u].references++,l[u].updater(p)):l.push({identifier:c,updater:b(p,n),references:1}),o.push(c)}return o}function s(e){var n=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var a=t.nc;a&&(o.nonce=a)}if(Object.keys(o).forEach((function(e){n.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(n);else{var l=i(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(n)}return n}var c,u=(c=[],function(e,n){return c[e]=n,c.filter(Boolean).join("\n")});function p(e,n,t,o){var a=t?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=u(n,a);else{var i=document.createTextNode(a),l=e.childNodes;l[n]&&e.removeChild(l[n]),l.length?e.insertBefore(i,l[n]):e.appendChild(i)}}function f(e,n,t){var o=t.css,a=t.media,i=t.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var m=null,v=0;function b(e,n){var t,o,a;if(n.singleton){var i=v++;t=m||(m=s(n)),o=p.bind(null,t,i,!1),a=p.bind(null,t,i,!0)}else t=s(n),o=f.bind(null,t,n),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)};return o(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;o(e=n)}else a()}}e.exports=function(e,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=a());var t=d(e=e||[],n);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<t.length;o++){var a=r(t[o]);l[a].references--}for(var i=d(e,n),s=0;s<t.length;s++){var c=r(t[s]);0===l[c].references&&(l[c].updater(),l.splice(c,1))}t=i}}}}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var i=n[o]={id:o,exports:{}};return e[o](i,i.exports,t),i.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e=t(379),n=t.n(e),o=t(247),a={insert:"head",singleton:!1};n()(o.Z,a);o.Z.locals;window.inlayCoDownloadInit||(window.inlayCoDownloadInit=function(e){if(!e.booted){e.booted=!0;var n="i"+e.publicID,t=!1,o={title:"",id:0,warning:""},a=function(e,n){t||(o.title=n.dataset.downloadTitle,o.id=n.dataset.downloadId,o.warning=(n.dataset.downloadWarning||"").replace(/^\s*/,"").replace(/\s*$/,""),console.log(n),r.title.textContent="Download: "+n.dataset.downloadTitle,o.warning&&(r.warningDiv.classList.add("idl-warning"),r.warningDiv.innerHTML=o.warning),l.classList.remove("at-rest"),l.classList.add("focussed"),document.body.classList.add("inlay-download-modal-active"),document.body.appendChild(l),t=!0,setTimeout((function(){return r.firstNameInput.focus()}),1)),e&&(e.classList.remove("pre-interaction"),e.validity.valid?e.parentNode.classList.remove("invalid"):e.parentNode.classList.add("invalid"))},i=function(){t=!1,l.classList.add("at-rest"),l.classList.remove("focussed"),document.body.classList.remove("inlay-download-modal-active"),d.forEach((function(e){e.value="",e.classList.add("pre-interaction"),e.parentNode.classList.remove("invalid"),e.reset&&e.reset()})),r.form.style.display="",r.thanks.style.display="none",r.submitButtonText.textContent=e.initData.buttonText,r.submitButton.disabled=!1};[].forEach.call(document.querySelectorAll('noscript[data-inlay-id="'.concat(e.publicID,'"]')),(function(e,n,t){if(!e.inlayProcessed){e.inlayProcessed=1;var o=document.createElement("a");o.setAttribute("href","#"),o.className=e.className||"button button--orange",o.addEventListener("click",(function(n){a(null,e)})),o.innerHTML='Download<svg class="icon"><use xlink:href="#icon--button"></use></svg>',e.insertAdjacentElement("afterend",o)}}));var l=document.createElement("div");l.classList.add("inlay-download","i"+e.publicID,"at-rest"),l.innerHTML='\n      <div class="idl-overlay">\n        <div class="idl-locator">\n          <button class="idl-close" title="Close this form">Ã—</button>\n          <form action=\'#\' >\n            <h2 class="idl-title"></h2>\n            <div class="idl-warning-placeholder"></div>\n            <div class="idl-field first_name">\n              <label for="'.concat(n,'-fn">First name<sup class="red" title="required">*</sup></label>\n              <input\n                id="').concat(n,'-fn"\n                name="first_name"\n                type="text"\n                required\n                />\n            </div>\n\n            <div class="idl-field last_name">\n              <label for="').concat(n,'-ln">Last name<sup class="red" title="required">*</sup></label>\n              <input\n                id="').concat(n,'-fn"\n                name="last_name"\n                type="text"\n                required\n                />\n            </div>\n\n            <div class="idl-field email">\n              <label for="').concat(n,'-e1">Email<sup class="red" title="required">*</sup></label>\n              <input\n                id="').concat(n,'-e1"\n                name="email"\n                type="email"\n                placeholder="youremail@example.org"\n                required\n                />\n            </div>\n\n            <div class="idl-field email">\n              <label for="').concat(n,'-e2">Email again to confirm<sup class="red" title="required">*</sup></label>\n              <input\n                id="').concat(n,'-e1"\n                name="email2"\n                type="email"\n                required\n                />\n            </div>\n\n            <div class="idl-field organisation">\n              <label for="').concat(n,'-o">Organisation</label>\n              <input\n                id="').concat(n,'-o"\n                name="organisation"\n                type="text"\n                placeholder=""\n                />\n            </div>\n\n            <div class="idl-field question">\n              <label for="').concat(n,'-q"><span></span><sup class="red" title="required">*</sup></label>\n              <textarea\n                rows=6 cols=60\n                id="').concat(n,'-q"\n                name="question"\n                required\n                ></textarea>\n            </div>\n\n            <div class="idl-field followup">\n              <label for="').concat(n,'-fu"><span></span><sup class="red" title="required">*</sup></label>\n              <select id="').concat(n,'-fu" required name="followup" >\n                <option value="">--Please select--</option>\n                <option value="Yes">Yes</option>\n                <option value="No">No</option>\n              </select>\n            </div>\n\n\n            <div class="idl-buttons">\n              <div class="idl-smallprint" ></div>\n              <button class="idl-submit button button--orange" type="submit" >\n                <span>Download</span>\n                <svg class="icon"><use xlink:href="#icon--button"></use></svg>\n              </button>\n              <div class="idl-progress-container"><div class="idl-progress"></div></div>\n            </div>\n          </form>\n          <div class="idl-thanks">\n            <div class="text">Thank you.</div>\n            <p>Your download should begin automatically after a few seconds. If not use this\n              <a>direct download link</a></p>\n          </div>\n        </div>\n      </div>\n      ');var r={overlay:l.firstElementChild,emailInput:l.querySelector('input[name="email"]'),title:l.querySelector(".idl-title"),warningDiv:l.querySelector(".idl-warning-placeholder"),email2Input:l.querySelector('input[name="email2"]'),firstNameInput:l.querySelector('input[name="first_name"]'),lastNameInput:l.querySelector('input[name="last_name"]'),orgInput:l.querySelector('input[name="organisation"]'),submitButton:l.querySelector("button.idl-submit"),submitButtonText:l.querySelector("button.idl-submit span"),closeButton:l.querySelector("button.idl-close"),smallprint:l.querySelector(".idl-smallprint"),thanks:l.querySelector(".idl-thanks"),thanksText:l.querySelector(".idl-thanks .text"),downloadLink:l.querySelector(".idl-thanks a"),progress:l.querySelector(".idl-progress"),form:l.querySelector("form"),questionLabel:l.querySelector(".question label span"),questionResponse:l.querySelector(".question textarea"),followupLabel:l.querySelector(".followup label span"),followup:l.querySelector(".followup select")};r.thanksText.innerHTML=e.initData.webThanksHTML,r.thanks.style.display="none",r.submitButtonText.textContent=e.initData.buttonText,r.smallprint.innerHTML=e.initData.smallprintHTML,r.questionLabel.textContent=e.initData.questionText,r.followupLabel.textContent=e.initData.followupText;var d=["emailInput","firstNameInput","lastNameInput","email2Input","orgInput"].map((function(e){return r[e]}));r.overlay.addEventListener("click",(function(e){this===e.target&&i()})),r.thanks.addEventListener("click",i),r.closeButton.addEventListener("click",i),d.forEach((function(e){e.classList.add("pre-interaction"),e.addEventListener("input",(function(n){return a(e)})),e.addEventListener("focus",(function(n){return a(e)}))})),r.submitButton.addEventListener("click",(function(e){if(console.log("buttonclick"),d.forEach((function(e){return a})),r.email2Input.value!==r.emailInput.value)return alert("Please check your email; the two don't match"),void e.preventDefault()}));var s={doneBefore:0,jobTotal:100,expectedTime:null,percent:0,start:null};window.cancelTimer=function(){s.start=null,s.running=!1,r.progress.parentNode.classList.remove("active")},r.form.addEventListener("submit",(function(n){function t(){r.submitButton.disabled=!1,r.submitButtonText.textContent=e.initData.buttonText,cancelTimer()}console.log("submitted and valid"),n.preventDefault(),r.submitButton.disabled=!0,r.submitButton.textContent="Just a mo...",p(2,20,1),e.request({method:"post",body:c()}).then((function(n){n&&(n.error?(alert("Sorry, there was a problem with the form: "+n.error),t()):n.token&&(console.log("Token received, waiting 5s"),p(6,80),setTimeout((function(){console.log("Sending 2nd request, with token"),p(2,100),e.request({method:"post",body:c(n.token)}).then((function(e){if(!e.success)return alert("Sorry, there was a problem with the form: "+(e.error||"unknown error")),void t();cancelTimer(),r.form.style.display="none",r.thanks.style.display="",r.downloadLink.setAttribute("href","/download/"+o.id),window.location="/download/"+o.id}))}),5e3)))})).catch((function(e){console.error("coDownload catch",e),t()}))})),e.script.insertAdjacentElement("afterend",l)}function c(e){var n={email:r.emailInput.value,first_name:r.firstNameInput.value,last_name:r.lastNameInput.value,organisation:r.orgInput.value,location:window.location.href,reportTitle:o.title,questionResponse:r.questionResponse.value,followup:r.followup.value};return e&&(n.token=e),n}function u(e){s.start||(s.start=e);var n=Math.min(1,(e-s.start)/s.expectedTime),t=1-(1-n)*(1-n)*(1-n);s.percent=s.doneBefore+t*(s.percentDoneAtEndOfJob-s.doneBefore),r.progress.style.width=s.percent+"%",s.running&&n<1?window.requestAnimationFrame(u):s.running=!1}function p(e,n,t){e*=1e3,t?(s={doneBefore:0,percentDoneAtEndOfJob:n,expectedTime:e,percent:0,start:null,running:!1},r.progress.parentNode.classList.add("active")):(s.doneBefore=s.percent,s.start=null,s.expectedTime=e,s.percentDoneAtEndOfJob=n),s.running||(s.running=!0,window.requestAnimationFrame(u))}})})()})();